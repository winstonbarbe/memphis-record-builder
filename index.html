<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Memphis Builder</title>
    <link rel="stylesheet" href="main.css" />
  </head>
  <body>
    <div id="builder-container">
      <div id="form-column">
        <h1>Memphis Builder</h1>
        <form id="wf-form-Record-Builder-Form">
          <!-- Section 1: Record Details -->
          <div class="form-main-section">
            <h2 class="form-section-title" data-section-number="01">
              RECORD DETAILS
            </h2>

            <!-- Record Cutting -->
            <div class="form-section">
              <label for="record-cutting">Record Cutting</label>
              <select id="record-cutting" name="record-cutting" required>
                <option value="mrp supplied">MRP Supplied</option>
                <option value="customer supplied">Customer Supplied</option>
                <option value="dmm">DMM</option>
              </select>
            </div>

            <!-- Record Size -->
            <div class="form-section">
              <label for="record-size">Record Size</label>
              <select id="record-size" name="record-size" required>
                <option value="12">12 Inch</option>
                <option value="10">10 Inch</option>
                <option value="7">7 Inch</option>
              </select>
            </div>

            <!-- Amount -->
            <div class="form-section">
              <label for="record-amount">Amount</label>
              <select id="record-amount" name="record-amount" required>
                <option value="single">Single</option>
                <option value="double">Double</option>
                <option value="triple">Triple</option>
              </select>
            </div>

            <!-- Record Type -->
            <div class="form-section">
              <label for="record-type">Record Type</label>
              <select id="record-type" name="record-type" required>
                <option value="black">Black</option>
                <option value="solids-translucent">Solids Translucent</option>
                <option value="solids-opaque">Solids Opaque</option>
                <option value="solids-neon">Solids Neon</option>
                <option value="eco-mix" id="eco-mix">Eco Mix</option>
                <option value="standard-blends" id="standard-blends">
                  Standard Blends
                </option>
                <option value="deluxe-blends" id="deluxe-blends">
                  Deluxe Blends
                </option>
                <option value="splatter" id="splatter">Splatter</option>
                <option value="two-color" id="two-color">Two Color</option>
                <option value="picture-disc" id="picture-disc">
                  Picture Disc
                </option>
              </select>
            </div>

            <!-- Record Weight -->
            <div class="form-section">
              <label for="record-weight">Record Weight</label>
              <select id="record-weight" name="record-weight" required>
                <option value="standard">Standard</option>
                <option value="heavyweight" id="heavyweight">
                  Heavyweight
                </option>
              </select>
            </div>

            <!-- Record Color -->
            <div class="form-section record-color-option-container">
              <label>Record Color</label>
              <div id="record-color-button" class="color-button">
                Select Color
              </div>
              <div id="selected-record-color-name">No color selected</div>
              <input type="hidden" id="record-color" name="record-color" />
              <div
                id="record-color-picker-container"
                class="color-picker-container"
              >
                <div id="memphis-color-options-container">
                  <div id="ecomix-options-container" style="display: none">
                    <!-- Eco Mix color options -->
                  </div>
                  <div
                    id="soilds-translucent-options-container"
                    style="display: none"
                  >
                    <!-- Solids Translucent color options -->
                  </div>
                  <div
                    id="soilds-opaque-options-container"
                    style="display: none"
                  >
                    <!-- Solids Opaque color options -->
                  </div>
                  <div
                    id="standard-blends-options-container"
                    style="display: none"
                  >
                    <!-- Standard Blends color options -->
                  </div>
                  <div
                    id="deluxe-blends-options-container"
                    style="display: none"
                  >
                    <!-- Deluxe Blends color options -->
                  </div>
                </div>
              </div>
            </div>

            <!-- Splatter Colors -->
            <div class="form-section" id="splatter-options-container">
              <label for="splatter-colors">Number of Splatter Colors</label>
              <select id="splatter-colors" name="splatter-colors">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
              </select>

              <div id="splatter-color-one-label" class="splatter-color-label">
                <label>Splatter Color 1</label>
                <div id="splatter-color-one-button" class="color-button">
                  Select Color
                </div>
                <div id="selected-splatter-color-one-name">
                  No color selected
                </div>
                <input
                  type="hidden"
                  id="splatter-color-one"
                  name="splatter-color-one"
                />
                <div
                  id="splatter-picker-color-one-container"
                  class="color-picker-container"
                >
                  <div id="memphis-color-options-container-splatter-one">
                    <div id="soilds-translucent-options-container-splatter-one">
                      <!-- Splatter color options -->
                    </div>
                  </div>
                </div>
              </div>

              <div id="splatter-color-two-label" class="splatter-color-label">
                <label>Splatter Color 2</label>
                <div id="splatter-color-two-button" class="color-button">
                  Select Color
                </div>
                <div id="selected-splatter-color-two-name">
                  No color selected
                </div>
                <input
                  type="hidden"
                  id="splatter-color-two"
                  name="splatter-color-two"
                />
                <div
                  id="splatter-picker-color-two-container"
                  class="color-picker-container"
                >
                  <div id="memphis-color-options-container-splatter-two">
                    <div id="soilds-translucent-options-container-splatter-two">
                      <!-- Splatter color options -->
                    </div>
                  </div>
                </div>
              </div>

              <div id="splatter-color-three-label" class="splatter-color-label">
                <label>Splatter Color 3</label>
                <div id="splatter-color-three-button" class="color-button">
                  Select Color
                </div>
                <div id="selected-splatter-color-three-name">
                  No color selected
                </div>
                <input
                  type="hidden"
                  id="splatter-color-three"
                  name="splatter-color-three"
                />
                <div
                  id="splatter-picker-color-three-container"
                  class="color-picker-container"
                >
                  <div id="memphis-color-options-container-splatter-three">
                    <div
                      id="soilds-translucent-options-container-splatter-three"
                    >
                      <!-- Splatter color options -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Section 2: Packaging -->
          <div class="form-main-section">
            <h2 class="form-section-title" data-section-number="02">
              PACKAGING
            </h2>

            <!-- A. Jacket -->
            <div class="form-subsection">
              <h3 class="form-subsection-title">Jacket</h3>

              <!-- Jacket Type -->
              <div class="form-section">
                <label for="jacket-type">Jacket Type</label>
                <select id="jacket-type" name="jacket-type" required>
                  <option value="single pocket">Single Pocket</option>
                  <option value="wide spine" id="wide-spine">Wide Spine</option>
                  <option value="gatefold" id="gatefold">Gatefold</option>
                  <option value="none">None</option>
                </select>
              </div>

              <!-- Jacket Options -->
              <div class="form-section" id="jacket-options-container">
                <label for="jacket-front-upload">Jacket Front Upload</label>
                <input
                  type="file"
                  id="jacket-front-upload"
                  name="jacket-front-upload"
                  accept="image/*"
                />
                <div class="file-upload-display" style="display: none">
                  <span id="jacket-front-upload-file-display"></span>
                  <button type="button" id="remove-jacket-front-image">
                    Remove
                  </button>
                </div>

                <div>
                  <label for="jacket-color">Jacket Color</label>
                  <select id="jacket-color" name="jacket-color" required>
                    <option value="full color">Full Color</option>
                    <option value="black & white">Black & White</option>
                  </select>
                </div>

                <div id="jacket-finish-options">
                  <label for="jacket-finish">Jacket Finish</label>
                  <select id="jacket-finish" name="jacket-finish" required>
                    <option value="standard gloss">Standard Gloss</option>
                    <option value="matte">Matte</option>
                    <option value="soft touch">Soft Touch</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- B. Label -->
            <div class="form-subsection">
              <h3 class="form-subsection-title">Label</h3>

              <!-- Label Type -->
              <div class="form-section">
                <label for="label-type">Label Type</label>
                <select id="label-type" name="label-type" required>
                  <option value="full color">Full Color</option>
                  <option value="black and white">Black & White</option>
                  <option value="blank">Blank</option>
                </select>
              </div>

              <!-- Label Color (for blank labels) -->
              <div
                class="form-section"
                id="blank-label-options-container"
                style="display: none"
              >
                <label for="label-color">Label Color</label>
                <select id="label-color" name="label-color">
                  <option value="white">White</option>
                  <option value="black">Black</option>
                </select>
              </div>

              <!-- Label Upload -->
              <div class="form-section" id="label-options-container">
                <label for="label-front-upload">Label Front Upload</label>
                <input
                  type="file"
                  id="label-front-upload"
                  name="label-front-upload"
                  accept="image/*"
                />
                <div class="file-upload-display" style="display: none">
                  <span id="label-front-upload-file-display"></span>
                  <button type="button" id="remove-label-front-image">
                    Remove
                  </button>
                </div>
              </div>
            </div>

            <!-- C. Inner Sleeve -->
            <div class="form-subsection">
              <h3 class="form-subsection-title">Inner Sleeve</h3>

              <!-- Inner Sleeve Type -->
              <div class="form-section">
                <label for="sleeve-type">Inner Sleeve Type</label>
                <select id="sleeve-type" name="sleeve-type" required>
                  <option value="anti-static">Anti-Static</option>
                  <option value="paper">Paper</option>
                  <option value="paper w/ poly lining">
                    Paper w/ Poly Lining
                  </option>
                  <option value="printed">Printed</option>
                </select>
              </div>

              <!-- Inner Sleeve Options -->
              <div class="form-section" id="sleeve-options-container">
                <div id="inner-sleeve-upload-container" style="display: none">
                  <label for="sleeve-upload">Inner Sleeve Upload</label>
                  <input
                    type="file"
                    id="sleeve-upload"
                    name="sleeve-upload"
                    accept="image/*"
                  />
                  <div class="file-upload-display" style="display: none">
                    <span id="sleeve-upload-file-display"></span>
                    <button type="button" id="remove-sleeve-image">
                      Remove
                    </button>
                  </div>
                </div>

                <div>
                  <label for="sleeve-color">Inner Sleeve Color</label>
                  <select id="sleeve-color" name="sleeve-color">
                    <option value="white" id="sleeve-white">White</option>
                    <option value="black" id="sleeve-black">Black</option>
                    <option value="black & white" id="sleeve-black-white">
                      Black & White
                    </option>
                    <option value="full color" id="sleeve-full-color">
                      Full Color
                    </option>
                  </select>
                </div>

                <div id="inner-sleeve-finish-options">
                  <label for="sleeve-finish">Inner Sleeve Finish</label>
                  <select id="sleeve-finish" name="sleeve-finish">
                    <option value="standard gloss">Standard Gloss</option>
                    <option value="matte">Matte</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- D. Print Insert -->
            <div class="form-subsection">
              <h3 class="form-subsection-title">Print Insert</h3>

              <!-- Printed Insert Type -->
              <div class="form-section">
                <label for="insert-type">Printed Insert Type</label>
                <select id="insert-type" name="insert-type" required>
                  <option value="none">None</option>
                  <option value="12x12" id="insert-12x12">12x12</option>
                  <option value="24x12" id="insert-24x12">24x12</option>
                  <option value="7x7" id="insert-7x7">7x7</option>
                  <option value="14x7" id="insert-14x7">14x7</option>
                </select>
              </div>

              <!-- Printed Insert Options -->
              <div class="form-section" id="insert-options-container">
                <label for="insert-upload">Printed Insert Upload</label>
                <input
                  type="file"
                  id="insert-upload"
                  name="insert-upload"
                  accept="image/*"
                />
                <div class="file-upload-display" style="display: none">
                  <span id="insert-upload-file-display"></span>
                  <button type="button" id="remove-insert-image">Remove</button>
                </div>

                <div>
                  <label for="insert-sides">Insert Sides</label>
                  <select id="insert-sides" name="insert-sides" required>
                    <option value="one sided">One Sided</option>
                    <option value="two sided">Two Sided</option>
                  </select>
                </div>

                <div>
                  <label for="insert-color">Insert Color</label>
                  <select id="insert-color" name="insert-color" required>
                    <option value="full color">Full Color</option>
                    <option value="black & white">Black & White</option>
                  </select>
                </div>

                <div id="insert-finish-options">
                  <label for="insert-finish">Insert Finish</label>
                  <select id="insert-finish" name="insert-finish" required>
                    <option value="standard gloss">Standard Gloss</option>
                    <option value="matte">Matte</option>
                    <option value="soft touch">Soft Touch</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- E. Download Cards -->
            <div class="form-subsection">
              <h3 class="form-subsection-title">Download Cards</h3>

              <!-- Download Cards Type -->
              <div class="form-section">
                <label for="download-card-type">Download Cards Type</label>
                <select
                  id="download-card-type"
                  name="download-card-type"
                  required
                >
                  <option value="none">None</option>
                  <option value="standard">Standard</option>
                </select>
              </div>
            </div>

            <!-- F. Outer Wrap -->
            <div class="form-subsection">
              <h3 class="form-subsection-title">Outer Wrap</h3>

              <!-- Outer Wrap Type -->
              <div class="form-section">
                <label for="outerwrap-type">Outer Wrap Type</label>
                <select id="outerwrap-type" name="outerwrap-type" required>
                  <option value="polybag">Polybag</option>
                  <option value="shrinkwrap">Shrinkwrap</option>
                  <option value="none">None</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Section 3: Finalize -->
          <div class="form-main-section">
            <h2 class="form-section-title" data-section-number="03">
              FINALIZE
            </h2>

            <!-- Project Name -->
            <div class="form-section">
              <label for="project-name">Project Name</label>
              <input type="text" name="project-name" id="project-name" />
            </div>

            <!-- Full Name -->
            <div class="form-section">
              <label for="full-name">Full Name</label>
              <input type="text" name="full-name" id="full-name" />
            </div>

            <!-- Email -->
            <div class="form-section">
              <label for="email">Email</label>
              <input type="email" name="email" id="email" />
            </div>
          </div>

          <!-- Quantity (hidden on desktop, shown on mobile) -->
          <div class="form-section desktop-hide-quantity">
            <label for="record-quantity">Quantity</label>
            <select id="record-quantity" name="record-quantity" required>
              <option value="100">100</option>
              <option value="200">200</option>
              <option value="250">250</option>
              <option value="300">300</option>
              <option value="500">500</option>
              <option value="750">750</option>
              <option value="1000">1,000</option>
              <option value="1250">1,250</option>
              <option value="1500">1,500</option>
              <option value="2000">2,000</option>
              <option value="2500">2,500</option>
              <option value="3000">3,000</option>
              <option value="3500">3,500</option>
              <option value="4000">4,000</option>
              <option value="5000">5,000</option>
              <option value="6000">6,000</option>
              <option value="7000">7,000</option>
              <option value="7500">7,500</option>
              <option value="8000">8,000</option>
              <option value="9000">9,000</option>
              <option value="10000">10,000</option>
              <option value="12500">12,500</option>
              <option value="15000">15,000</option>
              <option value="17500">17,500</option>
              <option value="20000">20,000</option>
              <option value="25000">25,000</option>
            </select>
            <div id="min-qty-display">Min: 100</div>
            <div id="max-qty-display">Max: 25,000</div>
          </div>

          <!-- Pricing Display (hidden on desktop, shown on mobile) -->
          <div class="form-section desktop-hide-pricing">
            <div id="slider-total-price-display">$0.00</div>
            <div id="slider-total-price-per-unit">$0.00 per unit</div>
            <button
              type="button"
              id="pricing-breakdown-button"
              class="button-primary"
            >
              View Pricing Breakdown
            </button>
          </div>

          <!-- Mobile Pricing Display (hidden on desktop) -->
          <div
            class="form-section"
            id="mobile-slider-container"
            style="display: none"
          >
            <label for="record-quantity-mobile">Quantity</label>
            <select id="record-quantity-mobile" name="record-quantity-mobile">
              <option value="100">100</option>
              <option value="200">200</option>
              <option value="250">250</option>
              <option value="300">300</option>
              <option value="500">500</option>
              <option value="750">750</option>
              <option value="1000">1,000</option>
              <option value="1250">1,250</option>
              <option value="1500">1,500</option>
              <option value="2000">2,000</option>
              <option value="2500">2,500</option>
              <option value="3000">3,000</option>
              <option value="3500">3,500</option>
              <option value="4000">4,000</option>
              <option value="5000">5,000</option>
              <option value="6000">6,000</option>
              <option value="7000">7,000</option>
              <option value="7500">7,500</option>
              <option value="8000">8,000</option>
              <option value="9000">9,000</option>
              <option value="10000">10,000</option>
              <option value="12500">12,500</option>
              <option value="15000">15,000</option>
              <option value="17500">17,500</option>
              <option value="20000">20,000</option>
              <option value="25000">25,000</option>
            </select>
            <div id="slider-total-price-display-mobile">$0.00</div>
            <div id="slider-total-price-per-unit-mobile">$0.00 per unit</div>
            <button
              type="button"
              id="pricing-breakdown-button-mobile"
              class="button-primary"
            >
              View Pricing Breakdown
            </button>
          </div>

          <!-- Form Verification -->
          <div id="form-verification-success-div" style="display: none">
            <p>All required fields are complete!</p>
          </div>

          <div id="missing-info-container" style="display: none">
            <p>Please complete the following fields:</p>
            <div id="missing-info-display"></div>
          </div>

          <!-- Submit Button -->
          <div class="form-section">
            <button type="button" id="prepare-to-submit" class="button-primary">
              Prepare to Submit
            </button>
            <button
              type="submit"
              id="builder-submit-button"
              class="button-primary"
              style="display: none"
            >
              Submit Order
            </button>
          </div>

          <!-- Hidden Price Inputs -->
          <input
            type="hidden"
            id="surcharge-price-input"
            name="surcharge-price-input"
          />
          <input
            type="hidden"
            id="setup-price-input"
            name="setup-price-input"
          />
          <input
            type="hidden"
            id="cutting-price-input"
            name="cutting-price-input"
          />
          <input
            type="hidden"
            id="plating-price-input"
            name="plating-price-input"
          />
          <input
            type="hidden"
            id="stampers-price-input"
            name="stampers-price-input"
          />
          <input
            type="hidden"
            id="test-pressings-price-input"
            name="test-pressings-price-input"
          />
          <input
            type="hidden"
            id="center-label-price-input"
            name="center-label-price-input"
          />
          <input
            type="hidden"
            id="record-price-input"
            name="record-price-input"
          />
          <input
            type="hidden"
            id="inner-sleeve-price-input"
            name="inner-sleeve-price-input"
          />
          <input
            type="hidden"
            id="jacket-price-input"
            name="jacket-price-input"
          />
          <input
            type="hidden"
            id="insert-price-input"
            name="insert-price-input"
          />
          <input
            type="hidden"
            id="download-card-price-input"
            name="download-card-price-input"
          />
          <input
            type="hidden"
            id="outerwrap-price-input"
            name="outerwrap-price-input"
          />
          <input
            type="hidden"
            id="insertion-price-input"
            name="insertion-price-input"
          />
          <input type="hidden" id="misc-price-input" name="misc-price-input" />
          <input
            type="hidden"
            id="total-price-input"
            name="total-price-input"
          />
          <input
            type="hidden"
            id="plating-display-input"
            name="plating-display-input"
          />
          <input
            type="hidden"
            id="test-pressings-shipping-fee-input"
            name="test-pressings-shipping-fee-input"
          />
          <input
            type="hidden"
            id="insertion-of-record-price-input"
            name="insertion-of-record-price-input"
          />
          <input
            type="hidden"
            id="insertion-of-inner-sleeve-price-input"
            name="insertion-of-inner-sleeve-price-input"
          />
          <input
            type="hidden"
            id="insertion-of-printed-insert-price-input"
            name="insertion-of-printed-insert-price-input"
          />
          <input
            type="hidden"
            id="insertion-of-jacket-price-input"
            name="insertion-of-jacket-price-input"
          />
          <input
            type="hidden"
            id="test-pressings-total-price-input"
            name="test-pressings-total-price-input"
          />
        </form>
      </div>

      <div id="visualizer-column">
        <!-- Quantity and Pricing (shown on desktop, hidden on mobile) -->
        <div class="visualizer-quantity-section desktop-show-quantity">
          <label for="record-quantity-visualizer">Quantity</label>
          <select
            id="record-quantity-visualizer"
            name="record-quantity-visualizer"
            required
          >
            <option value="100">100</option>
            <option value="200">200</option>
            <option value="250">250</option>
            <option value="300">300</option>
            <option value="500">500</option>
            <option value="750">750</option>
            <option value="1000">1,000</option>
            <option value="1250">1,250</option>
            <option value="1500">1,500</option>
            <option value="2000">2,000</option>
            <option value="2500">2,500</option>
            <option value="3000">3,000</option>
            <option value="3500">3,500</option>
            <option value="4000">4,000</option>
            <option value="5000">5,000</option>
            <option value="6000">6,000</option>
            <option value="7000">7,000</option>
            <option value="7500">7,500</option>
            <option value="8000">8,000</option>
            <option value="9000">9,000</option>
            <option value="10000">10,000</option>
            <option value="12500">12,500</option>
            <option value="15000">15,000</option>
            <option value="17500">17,500</option>
            <option value="20000">20,000</option>
            <option value="25000">25,000</option>
          </select>
          <div class="qty-display">
            <span>Min: 100</span>
            <span>Max: 25,000</span>
          </div>

          <!-- Pricing Display in Visualizer -->
          <div class="visualizer-pricing-display">
            <div id="slider-total-price-display-visualizer">$0.00</div>
            <div id="slider-total-price-per-unit-visualizer">
              $0.00 per unit
            </div>
            <button
              type="button"
              id="pricing-breakdown-button-visualizer"
              class="button-primary"
            >
              View Pricing Breakdown
            </button>
          </div>
        </div>
        <div id="visualizer">
          <!-- Jacket Cover (Orange Square) -->
          <div
            id="builder-jacket-front-display"
            class="visualizer-jacket-display"
          >
            <img
              id="jacket-image-display"
              style="
                display: none;
                width: 100%;
                height: 100%;
                object-fit: cover;
              "
              alt="Jacket Cover"
            />
          </div>

          <!-- Record Discs Container -->
          <div class="visualizer-records-container">
            <!-- Disc 1 - Keep original ID for builder.js compatibility -->
            <div
              id="builder-record-display"
              class="visualizer-record-display record-disc-1"
            >
              <div class="record-label-center" id="record-label-1"></div>
            </div>
            <div
              id="builder-record-display-2"
              class="visualizer-record-display record-disc-2"
              style="display: none"
            >
              <div class="record-label-center" id="record-label-2"></div>
            </div>
            <div
              id="builder-record-display-3"
              class="visualizer-record-display record-disc-3"
              style="display: none"
            >
              <div class="record-label-center" id="record-label-3"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Pricing Breakdown Modal -->
    <div class="modal-background-2" id="pricing-breakdown-modal">
      <div class="builder-breakdown-container">
        <button id="close-breakdown-modal" class="close-button">Ã—</button>
        <h2>Pricing Breakdown</h2>
        <div id="project-title-display">Project Title</div>

        <div class="breakdown-section">
          <div id="setup-fee-breakdown-display" class="breakdown-item">
            Setup Fee: $0.00
          </div>
          <div id="setup-option-display" class="breakdown-sub-item">
            <span id="setup-option-sub-price">$0.00</span>
          </div>

          <div id="cutting-fee-breakdown-display" class="breakdown-item">
            Cutting Fee: $0.00
          </div>
          <div id="cutting-option-display" class="breakdown-sub-item">
            <span id="cutting-option-sub-price">$0.00</span>
          </div>

          <div id="plating-fee-breakdown-display" class="breakdown-item">
            Plating Fee: $0.00
          </div>
          <div id="plating-option-display" class="breakdown-sub-item">
            <span id="plating-option-sub-price">$0.00</span>
          </div>

          <div id="stampers-fee-breakdown-display" class="breakdown-item">
            Stampers Fee: $0.00
          </div>

          <div id="mastering-breakdown-display" class="breakdown-item">
            Mastering: $0.00
          </div>
          <div id="mastering-option-display" class="breakdown-sub-item">
            <span id="mastering-option-sub-price">$0.00</span>
          </div>

          <div id="test-pressings-initial-sub-price" class="breakdown-item">
            Test Pressings: $0.00
          </div>
          <div
            id="num-of-additional-pressings-display"
            class="breakdown-sub-item"
          >
            Additional Pressings: 0
          </div>
          <div id="test-pressings-shipping-sub-price" class="breakdown-item">
            Test Pressings Shipping: $0.00
          </div>

          <div id="center-labels-fee-breakdown-display" class="breakdown-item">
            Center Labels: $0.00
          </div>
          <div id="center-labels-option-display" class="breakdown-sub-item">
            <span id="center-labels-option-sub-price">$0.00</span>
          </div>

          <div id="records-fee-breakdown-display" class="breakdown-item">
            Records: $0.00
          </div>
          <div id="record-option-sub-price" class="breakdown-sub-item">
            <div id="record-size-breakdown-display">Size: 12 Inch</div>
            <div id="record-weight-breakdown-display">Weight: Standard</div>
            <div id="record-type-breakdown-display">Type: Black</div>
          </div>

          <div id="inner-sleeve-fee-breakdown-display" class="breakdown-item">
            Inner Sleeve: $0.00
          </div>
          <div id="sleeve-option-sub-price" class="breakdown-sub-item">
            <div id="sleeve-type-breakdown-display">Type: Anti-Static</div>
            <div id="sleeve-color-breakdown-display">Color: White</div>
            <div id="sleeve-finish-breakdown-display">
              Finish: Standard Gloss
            </div>
          </div>

          <div id="jacket-fee-breakdown-display" class="breakdown-item">
            Jacket: $0.00
          </div>
          <div id="jacket-option-sub-price" class="breakdown-sub-item">
            <div id="jacket-type-breakdown-display">Type: Single Pocket</div>
            <div id="jacket-color-breakdown-display">Color: Full Color</div>
            <div id="jacket-finish-breakdown-display">
              Finish: Standard Gloss
            </div>
          </div>

          <div id="insert-fee-breakdown-display" class="breakdown-item">
            Insert: $0.00
          </div>
          <div id="insert-option-sub-price" class="breakdown-sub-item">
            <div id="insert-type-breakdown-display">Type: None</div>
            <div id="insert-sides-breakdown-display">Sides: One Sided</div>
            <div id="insert-color-breakdown-display">Color: Full Color</div>
            <div id="insert-finish-breakdown-display">
              Finish: Standard Gloss
            </div>
          </div>

          <div id="outerwrap-fee-breakdown-display" class="breakdown-item">
            Outerwrap: $0.00
          </div>
          <div id="outerwrap-option-display" class="breakdown-sub-item">
            <span id="outerwrap-option-sub-price">$0.00</span>
          </div>

          <div id="download-cards-fee-breakdown-display" class="breakdown-item">
            Download Cards: $0.00
          </div>
          <div id="download-card-option-display" class="breakdown-sub-item">
            <span id="download-card-option-sub-price">$0.00</span>
          </div>

          <div id="misc-fee-breakdown-display" class="breakdown-item">
            Misc: $0.00
          </div>

          <div id="insertion-fee-breakdown-display" class="breakdown-item">
            Insertion: $0.00
          </div>
          <div
            id="insertion-of-record-price-display"
            class="breakdown-sub-item"
          >
            Record Insertion: $0.00
          </div>
          <div
            id="insertion-of-sleeve-price-display"
            class="breakdown-sub-item"
          >
            Sleeve Insertion: $0.00
          </div>
          <div
            id="insertion-of-insert-price-display"
            class="breakdown-sub-item"
          >
            Insert Insertion: $0.00
          </div>
          <div
            id="insertion-of-jacket-price-display"
            class="breakdown-sub-item"
          >
            Jacket Insertion: $0.00
          </div>

          <div
            id="splatter-surcharge-sub-price"
            class="breakdown-item"
            style="display: none"
          >
            Splatter Surcharge: <span>$0.00</span>
          </div>

          <div class="breakdown-total">
            <div id="order-total-display">Total: $0.00</div>
            <div id="order-total-per-unit">Per Unit: $0.00</div>
          </div>

          <button id="continue-editing-button" class="button-primary">
            Continue Editing
          </button>
        </div>
      </div>
    </div>

    <script src="builder.js"></script>
    <script>
      // Sync quantity selects and pricing displays between form and visualizer
      // Use an IIFE to avoid conflicts with builder.js variables
      (function () {
        // Wait for both DOM and builder.js to be ready
        function initAll() {
          const qtyInput = document.getElementById("record-quantity");
          const qtyVisualizer = document.getElementById(
            "record-quantity-visualizer"
          );

          // Pricing display elements
          const priceDisplay = document.getElementById(
            "slider-total-price-display"
          );
          const pricePerUnitDisplay = document.getElementById(
            "slider-total-price-per-unit"
          );
          const priceDisplayVisualizer = document.getElementById(
            "slider-total-price-display-visualizer"
          );
          const pricePerUnitDisplayVisualizer = document.getElementById(
            "slider-total-price-per-unit-visualizer"
          );
          const pricingButton = document.getElementById(
            "pricing-breakdown-button"
          );
          const pricingButtonVisualizer = document.getElementById(
            "pricing-breakdown-button-visualizer"
          );

          // Sync quantity selects
          if (qtyInput && qtyVisualizer) {
            // Sync visualizer -> form
            qtyVisualizer.addEventListener("change", () => {
              qtyInput.value = qtyVisualizer.value;
              qtyInput.dispatchEvent(new Event("change", { bubbles: true }));
              qtyInput.dispatchEvent(new Event("input", { bubbles: true }));
            });

            // Sync form -> visualizer
            qtyInput.addEventListener("change", () => {
              qtyVisualizer.value = qtyInput.value;
            });

            qtyInput.addEventListener("input", () => {
              qtyVisualizer.value = qtyInput.value;
            });
          }

          // Sync pricing displays - update visualizer when form updates
          if (priceDisplay && priceDisplayVisualizer) {
            const observer = new MutationObserver(() => {
              if (priceDisplay.innerText !== priceDisplayVisualizer.innerText) {
                priceDisplayVisualizer.innerText = priceDisplay.innerText;
              }
            });
            observer.observe(priceDisplay, {
              childList: true,
              characterData: true,
              subtree: true,
            });

            // Initial sync
            priceDisplayVisualizer.innerText = priceDisplay.innerText;
          }

          if (pricePerUnitDisplay && pricePerUnitDisplayVisualizer) {
            const observer = new MutationObserver(() => {
              if (
                pricePerUnitDisplay.innerText !==
                pricePerUnitDisplayVisualizer.innerText
              ) {
                pricePerUnitDisplayVisualizer.innerText =
                  pricePerUnitDisplay.innerText;
              }
            });
            observer.observe(pricePerUnitDisplay, {
              childList: true,
              characterData: true,
              subtree: true,
            });

            // Initial sync
            pricePerUnitDisplayVisualizer.innerText =
              pricePerUnitDisplay.innerText;
          }

          // Sync pricing breakdown button clicks
          if (pricingButton && pricingButtonVisualizer) {
            pricingButtonVisualizer.addEventListener("click", (e) => {
              e.preventDefault();
              e.stopPropagation();
              pricingButton.click();
            });
          }

          // Control disc visibility based on amount selection
          const amountInput = document.getElementById("record-amount");
          const recordDisc1 = document.getElementById("builder-record-display");
          const recordDisc2 = document.getElementById(
            "builder-record-display-2"
          );
          const recordDisc3 = document.getElementById(
            "builder-record-display-3"
          );

          function updateDiscVisibility() {
            if (!amountInput) return;

            const amount = amountInput.value;

            // Show/hide discs based on selection
            if (recordDisc1) recordDisc1.style.display = "block";
            if (recordDisc2)
              recordDisc2.style.display =
                amount === "double" || amount === "triple" ? "block" : "none";
            if (recordDisc3)
              recordDisc3.style.display =
                amount === "triple" ? "block" : "none";
          }

          // Initial update
          updateDiscVisibility();

          // Update when amount changes
          if (amountInput) {
            amountInput.addEventListener("change", updateDiscVisibility);
          }

          // Sync record images to all visible discs from disc 1 (which builder.js updates)
          // Watch for changes to the original record display (from builder.js)
          if (recordDisc1) {
            const recordObserver = new MutationObserver(() => {
              const bgImage =
                window.getComputedStyle(recordDisc1).backgroundImage;
              if (bgImage && bgImage !== "none" && bgImage !== 'url("")') {
                if (recordDisc2) recordDisc2.style.backgroundImage = bgImage;
                if (recordDisc3) recordDisc3.style.backgroundImage = bgImage;
              }
            });
            recordObserver.observe(recordDisc1, {
              attributes: true,
              attributeFilter: ["style"],
              subtree: true,
            });

            // Also use polling to catch style changes
            let lastRecordImage = "";
            setInterval(() => {
              const currentImage =
                window.getComputedStyle(recordDisc1).backgroundImage;
              if (
                currentImage !== lastRecordImage &&
                currentImage !== "none" &&
                currentImage !== 'url("")'
              ) {
                lastRecordImage = currentImage;
                if (recordDisc2)
                  recordDisc2.style.backgroundImage = currentImage;
                if (recordDisc3)
                  recordDisc3.style.backgroundImage = currentImage;
              }
            }, 100);
          }

          // Handle label upload to display on record center labels
          const labelUpload = document.querySelector(
            "input[name='label-front-upload']"
          );
          const recordLabel1 = document.getElementById("record-label-1");
          const recordLabel2 = document.getElementById("record-label-2");
          const recordLabel3 = document.getElementById("record-label-3");

          if (labelUpload && recordLabel1) {
            labelUpload.addEventListener(
              "change",
              (e) => {
                const file = labelUpload.files[0];
                if (file) {
                  const imageUrl = URL.createObjectURL(file);

                  // Set label image on all visible discs
                  if (recordLabel1) {
                    recordLabel1.style.backgroundImage = `url(${imageUrl})`;
                    recordLabel1.style.backgroundSize = "cover";
                    recordLabel1.style.backgroundPosition = "center";
                    recordLabel1.style.backgroundRepeat = "no-repeat";
                  }
                  if (recordLabel2) {
                    recordLabel2.style.backgroundImage = `url(${imageUrl})`;
                    recordLabel2.style.backgroundSize = "cover";
                    recordLabel2.style.backgroundPosition = "center";
                    recordLabel2.style.backgroundRepeat = "no-repeat";
                  }
                  if (recordLabel3) {
                    recordLabel3.style.backgroundImage = `url(${imageUrl})`;
                    recordLabel3.style.backgroundSize = "cover";
                    recordLabel3.style.backgroundPosition = "center";
                    recordLabel3.style.backgroundRepeat = "no-repeat";
                  }
                } else {
                  // Clear labels if file removed
                  if (recordLabel1) recordLabel1.style.backgroundImage = "";
                  if (recordLabel2) recordLabel2.style.backgroundImage = "";
                  if (recordLabel3) recordLabel3.style.backgroundImage = "";
                }
              },
              true
            );
          }

          // Ensure jacket image displays properly
          // Handle jacket upload directly to ensure it displays
          const jacketUpload = document.querySelector(
            "input[name='jacket-front-upload']"
          );
          const jacketDisplay = document.getElementById(
            "builder-jacket-front-display"
          );

          if (jacketUpload && jacketDisplay) {
            // Add our own change handler that sets the image
            // Try using img element as fallback
            const jacketImage = document.getElementById("jacket-image-display");

            jacketUpload.addEventListener(
              "change",
              (e) => {
                const file = jacketUpload.files[0];
                if (file) {
                  const imageUrl = URL.createObjectURL(file);

                  // Method 1: Try background-image
                  jacketDisplay.style.setProperty(
                    "background-image",
                    `url(${imageUrl})`,
                    "important"
                  );
                  jacketDisplay.style.setProperty(
                    "background-size",
                    "cover",
                    "important"
                  );
                  jacketDisplay.style.setProperty(
                    "background-position",
                    "center",
                    "important"
                  );
                  jacketDisplay.style.setProperty(
                    "background-repeat",
                    "no-repeat",
                    "important"
                  );
                  jacketDisplay.style.setProperty(
                    "background-color",
                    "transparent",
                    "important"
                  );

                  // Method 2: Also set img element as backup
                  if (jacketImage) {
                    jacketImage.src = imageUrl;
                    jacketImage.style.display = "block";
                  }

                  // Ensure it's visible
                  jacketDisplay.style.display = "block";
                } else {
                  jacketDisplay.style.backgroundImage = "";
                  jacketDisplay.style.backgroundColor = "#ff8c42";
                  if (jacketImage) {
                    jacketImage.style.display = "none";
                  }
                }
              },
              true
            ); // Use capture phase

            // Also monitor for changes from builder.js (in case it runs after)
            const jacketObserver = new MutationObserver(() => {
              const bgImage = jacketDisplay.style.backgroundImage;
              if (
                bgImage &&
                bgImage !== "none" &&
                bgImage !== "" &&
                bgImage !== 'url("")'
              ) {
                // Ensure the image is visible with proper styling
                jacketDisplay.style.backgroundImage = bgImage;
                jacketDisplay.style.backgroundSize = "cover";
                jacketDisplay.style.backgroundPosition = "center";
                jacketDisplay.style.backgroundRepeat = "no-repeat";
              }
            });

            jacketObserver.observe(jacketDisplay, {
              attributes: true,
              attributeFilter: ["style"],
              subtree: true,
            });

            // Check on load if there's already an image
            setTimeout(() => {
              const bgImage = jacketDisplay.style.backgroundImage;
              if (
                bgImage &&
                bgImage !== "none" &&
                bgImage !== "" &&
                bgImage !== 'url("")'
              ) {
                jacketDisplay.style.backgroundSize = "cover";
                jacketDisplay.style.backgroundPosition = "center";
                jacketDisplay.style.backgroundRepeat = "no-repeat";
              }
            }, 500);
          } else {
            // Try again after a delay
            setTimeout(initAll, 1000);
          }
        }

        // Try multiple times to ensure elements are found
        if (document.readyState === "loading") {
          window.addEventListener("DOMContentLoaded", initAll);
        } else {
          // DOM already loaded
          setTimeout(initAll, 100);
        }

        // Also try after builder.js has had time to run
        window.addEventListener("load", () => {
          setTimeout(initAll, 500);
        });

        // Immediate attempt
        setTimeout(initAll, 50);
      })();
    </script>
  </body>
</html>
